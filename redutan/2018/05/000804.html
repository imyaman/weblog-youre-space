<!DOCTYPE html>
<html lang="en-us" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="UTF-8">
    <meta name="description" content="서브도메인과 바운디드 컨텍스트로 전략적으로 설계해보자. 큰그림 서브도메인과 바운디드 컨텍스트의 활용 온라인 쇼핑몰 도메인 전자상거래 시스템 : 상품 카탈로그, 주문 , 송장, 배송 서브도메인 재고관리 시스템 : 재고관리 외부 예측 시스템 : ? 제품 카탈로그, 주문, 송장, 배송 모델 등을 하나로...">
    <meta name="generator" content="Movable Type 6.3.6">
    <title>IDDD 2장. 도메인, 서브도메인, 바운디드 컨텍스트 - redutan</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="https://weblog.youre.space/redutan/styles.css">
    <!--[if lt IE 9]>
    <link rel="stylesheet" href="https://weblog.youre.space/redutan/styles_ie.css">
    <script src="https://connexus.youre.space/mt-static/support/theme_static/rainier/js/html5shiv.js"></script>
    <![endif]-->
    
    <link rel="start" href="https://weblog.youre.space/redutan/">
    <link rel="alternate" type="application/atom+xml" title="Recent Entries" href="https://weblog.youre.space/redutan/atom.xml" />
    <link rel="canonical" href="https://weblog.youre.space/redutan/2018/05/000804.html" />
    <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-102177098-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


    <link rel="prev" href="https://weblog.youre.space/redutan/2018/04/000765.html" title="상속의 위험성">
    <link rel="next" href="https://weblog.youre.space/redutan/2018/05/000805.html" title="IDDD 1장. DDD를 시작하며">
    <!-- Open Graph Protocol -->
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en-us">
    <meta property="og:title" content="IDDD 2장. 도메인, 서브도메인, 바운디드 컨텍스트">
    <meta property="og:url" content="https://weblog.youre.space/redutan/2018/05/000804.html">
    <meta property="og:description" content="서브도메인과 바운디드 컨텍스트로 전략적으로 설계해보자. 큰그림 서브도메인과 바운디드 컨텍스트의 활용 온라인 쇼핑몰 도메인 전자상거래 시스템 : 상품 카탈로그, 주문 , 송장, 배송 서브도메인 재고관리 시스템 : 재고관리 외부 예측 시스템 : ? 제품 카탈로그, 주문, 송장, 배송 모델 등을 하나로...">
    <meta property="og:site_name" content="redutan">
    <meta property="og:image" content="https://connexus.youre.space/mt-static/support/theme_static/rainier/img/siteicon-sample.png">
    <!-- Metadata -->
    <meta itemprop="description" content="서브도메인과 바운디드 컨텍스트로 전략적으로 설계해보자. 큰그림 서브도메인과 바운디드 컨텍스트의 활용 온라인 쇼핑몰 도메인 전자상거래 시스템 : 상품 카탈로그, 주문 , 송장, 배송 서브도메인 재고관리 시스템 : 재고관리 외부 예측 시스템 : ? 제품 카탈로그, 주문, 송장, 배송 모델 등을 하나로...">
    <link itemprop="url" href="https://weblog.youre.space/redutan/2018/05/000804.html">
    <link itemprop="image" href="https://connexus.youre.space/mt-static/support/theme_static/rainier/img/siteicon-sample.png">
    
  </head>
  <body>
    <div id="container">
      <div id="container-inner">
        <header id="header" role="banner">
          <div id="header-inner">
            <div id="header-content">
              <h1>
                <a href="https://weblog.youre.space/redutan/">

                  redutan

                </a>
              </h1>
              
            </div>

            <nav role="navigation">
          <ul>
            <li><a href="https://weblog.youre.space/redutan/">Home</a></li>


          </ul>
        </nav>

          </div>
        </header>
        <div id="content">
          <div id="content-inner">
            <ul class="breadcrumb breadcrumb-list">
              <li class="breadcrumb-list-item"><a href="https://weblog.youre.space/redutan/">Home</a></li>
              <li class="breadcrumb-list-item">IDDD 2장. 도메인, 서브도메인, 바운디드 컨텍스트</li>
            </ul>
            <div id="individual-main" class="main" role="main">
              <article id="entry-804" class="entry entry-asset asset hentry">
                <div class="asset-header">
                  <h2 itemprop="name" class="asset-name entry-title">IDDD 2장. 도메인, 서브도메인, 바운디드 컨텍스트</h2>
                  <footer class="asset-meta">
                    <ul class="asset-meta-list">
                      <li class="asset-meta-list-item">Posted on <time datetime="2018-05-10T19:07:24+09:00" itemprop="datePublished">May 10, 2018</time></li>
                      <li class="asset-meta-list-item">by <span class="author entry-author vcard"><a class="fn url" href="http://weblog.youre.space/vergence/">Sangyong Gwak</a></span></li>

  

                   </ul>
                </footer>
                </div>
                <div class="entry-content asset-content" itemprop="articleBody">
                  <p>서브도메인과 바운디드 컨텍스트로 전략적으로 설계해보자.</p>

<p>큰그림</p>

<p>서브도메인과 바운디드 컨텍스트의 활용</p>

<p>온라인 쇼핑몰 도메인</p>

<p>전자상거래 시스템 : 상품 카탈로그, 주문 , 송장, 배송 서브도메인</p>

<p>재고관리 시스템 : 재고관리</p>

<p>외부 예측 시스템 : ?</p>

<p>제품 카탈로그, 주문, 송장, 배송 모델 등을 하나로 엮어서 복잡도가 높아지며 부정적인 결과를 초래</p>

<p>소프트웨어의 관심사를 도메인을 바탕으로 분명하게 분리시켜야 한다.</p>

<p>상호 의존성을 갖기 때문에, 서브도메인으로 나누지 않는다면 변화가 계속됨에 따라 훨씬 큰 부담 을 지게 된다.</p>

<p>일반적으로 하나의 바운디드 컨텍스트에 하나의 서브도메인이 있는 것이 좋다. : 재고관리는 좋아 보인다.</p>

<p>물론 DSL이 포함되어야 한다.</p>

<p>같은 언어일지라도 개념은 전혀 다를 수 있다.</p>

<p>핵심 도메인에 집중하기</p>

<p>핵심도메인 : 주문</p>

<p>지원 서브도메인 : 배송, 상품, 송장</p>

<p>범용 서브도메인 : 회원(인증과 권한)</p>

<p>결국 도메인 전문가와 소통으로 정제하는 것이 중요하다.</p>

<p>왜 전략적 설계가 엄청나게 필수적인가</p>

<p>협업 개념이 사용자 및 권한과 강한 결합을 가지는 것이 옳은가?</p>

<p>협업 개념에서는 회원은 그저 작성자 일 뿐이다.</p>

<p>그림 2.3 팀이 전략적 설계의 기초를 이해하지 못했고, 이는 공동 모델에서 개념들이 잘못 찢어지도록 했다. 점선 안의 문제가 되는 요소들이다.</p>

<p>협업 도구는 사용자의 역할에 집중해야지, 사용자가 누구며 수행권한이 부여된 행동이 무엇인지에 관심이 있어선 안 된다. 하지만 위에서는 뒤섞여 버렸다.</p>

<p>포럼 은 단지 토론을 게시하고 싶은 작성자 만 있으면 된다.</p>

<p>사용자와 권한은 협업 컨텍스트에서 독립돼야 한다.</p>

<p>Big ball of mud : 거대한 진흙공 - 빈약한 도메인으로 가득찬 모노리식 애플리케이션</p>

<p>이런 사용자와 권한 서브도메엔을 범용 서브도메인이라고 한다.</p>

<p>이윽고 팀이 비협업 개념의 또 다른 집합을 모델링하는 상황이 오면, 핵심 도메인은 더욱 불확실해진다.</p>

<p>풍부한 협업의 유비쿼터스 언어를 제대로 소스 코드에 반영하지 못한 채, 이를 은영준에 내포하고 있을 뿐인 모델을 만들고 말 수도 있다.</p>

<p>팀은 비즈니스 도메인과 그에 따른 서브데메인은 물론이고, 반드시 그들이 개발하고 있는 바운디드 컨텍스트도 제대로 이해해야한다.</p>

<p>이를 통해 전략적 설계를 가로 막는 비열한 적인 거대한 진흙공의 더러운 물을 막을 수 있다.</p>

<p>현실의 도메인과 서브도메인</p>

<p>문제점 공간과 해결책 공간</p>

<p>도메인은 문제점 공간(problem space)과 해결책 공간(solution space)을 모두 갖고 있다.</p>

<p>문제점 공간 : 새로운 핵심 도메인을 만들기 위한 전체 도메인의 일부 > 핵심 도메인과 서브 도메인의 조합</p>

<p>해결책 공간 : 해결책을 소프트웨어로 구현 > 바운디드 컨텍스트</p>

<p>서브 도메인을 1:1로 바운디드 컨텍스트로 묶는 것은 좋은 목표이다 하지만 항상 그렇지는 않다.</p>

<p>그림 2.4 구매나 재고관리와 관련된 핵심 도메인과 다른 서브도메인. 이 관점은 특정 문제점 공간 분석을 위해 선택된 서브도메인으로 제한되며 전체 도메인에 적용할 수는 없다.</p>

<p>최적 매입 컨텍스트 = 핵심 도메인</p>

<p>구매 컨텍스트 + ERP 구매 모듈 = 구매 지원 서브 도메인</p>

<p>재고 관리 컨텍스트 + ERP 재고 모듈 = 재고 관리 지원 서브 도메인</p>

<p>매핑 컨텍스트 : 범용 서브 도메인</p>

<p>최적 매입 컨텍스트를 개발하는 회사 입장에서의 이런 핵심 포인트 를 살펴봤음을 기억하자.</p>

<p>지리적 매핑 서비스는 문제점 공간에서 재고관리 서브도메인의 일부로 간주하지만, 해결책 공간에서 재고관리 컨텍스트가 아니다.</p>

<p>매핑 서비스가 해결책 공간에선 간단한 컴포넌트 기반 API로 제공됐다 하더라도, 이는 다른 바운디드 컨텍스트다.</p>

<p>재고 관리와 매핑의 유비쿼터스 언어는 상호 배타적이며, 이는 두 요소가 서로 다른 바운디드 컨텍스트라는 의미다.</p>

<p>재고 관리 컨텍스트가 외부 매핑 컨텍스트의 어떤 부분을 사용하는 상황에서, 데이터는 적어도 최소한의 변환 을 거쳐야만 적절히 사용될 수 있다.</p>

<p>한편 구독자를 위해 매핑 서비스를 개발 하고 제공하는 외부 비즈니스 조직의 관점에서 보면 매핑은 핵심 도메인 이다.</p>

<p>전략적 이니셔티브 : KPI를 달성하기 위한 핵심적인 활동이나 계획</p>

<p>바운디드 컨텍스트 이해하기</p>

<p>바운디드 컨텍스트는 그 안에 도메인 모델이 존재하는 명시적 경계</p>

<p>바운디드 컨텍스는 명시적이고 언어적이다</p>

<p>컨텍스트가 왕이다. in DDD</p>

<p>모델의 중앙화, 범용화는 Evil 이다. 컨텍스트 별로 모델은 다른 의미를 가진다.</p>

<p>그림 2.5 두 바인디드 컨텍스트 속 어카운트 객체는 의미가 서로 완전 다르지만, 각 바운디드 컨텍스트 안에서 고려해야만 그 사실을 알 수 있다.</p>

<p>컨텍스트</p>

<p>어카운트 의미</p>

<p>예</p>

<p>은행</p>

<p>계좌</p>

<p>적금 계좌</p>

<p>문학</p>

<p>이야기</p>

<p>A Personal Account of Mt. Everest Disaster</p>

<p>모든 것을 빠짐없이 포괄하는 모델을 생성하려 시도하는 함정에 빠지며, 어디서든 통용되는 유일한 의미를 가진 이름의 개념에 대해 전체 조직이 모두 동의하는 결과를 목표로 삼는다.</p>

<p>이런 모델링 접근법에는 구멍이 있다.</p>

<p>모든 이해관계자로부터 모든 개념이 하나의 순수하고 구분된 글로벌한 의미를 갖는 것에 대해 동의를 얻기란 거의 불가능하다.</p>

<p>모든 사람을 함께 모으는 것은 절대 불가능하다. : 이건 좀 아닌 것 같음.</p>

<p>최상의 선택을 위해선 언제나 차이점은 존재한다는 사실을 직시하고 ,바운디드 컨텍스트를 통해 차이점이 명확하며 잘 이해하고 있는 도메인 모델을 각각 기술해야 한다.</p>

<p>1 바운디드 컨텍스트 != 1 프로젝트 아티팩트(산출물)</p>

<p>주문은 카탈로그 컨텍스트와 주문 컨텍스트에서 다른 모델로 표현된다.</p>

<p>고객은 등록, 계정, 배송 컨텍스트 별로 다른 모델로 표현된다.</p>

<p>모델 그 이상을 위해</p>

<p>아래 항목들도 바운디드 컨텍스트 경계 안에 있다.</p>

<p>Application Service : 보안 트랜젝션 관리 : 퍼사드</p>

<p>UI</p>

<p>Api Client : API 통합</p>

<p>안티패턴</p>

<p>Smart UI</p>

<p>바운디드 컨텍스트의 크기</p>

<p>= 유비쿼터스 언어를 표현하기 위해 필요한 크기</p>

<p>딱 내가 원했던 만큼의 음표들이 있었습니다. 더도 덜도 아닌</p>

<p>모짜르트</p>

<p>잘못된 크기의 바운디드 컨텍스트를 만들게 되는 이유?</p>

<p>아키텍처적 영향을 기준으로 삼는 경우(플랫폼, 프레임워크, 컴포넌트, 인프라 등)</p>

<p>개발자 리소스(또는 팀)를 작업을 분배하기 위해</p>

<p>기술적 컴포넌트로 정렬하기</p>

<p>com.mycompany.optimalpuchasing : bounded context</p>

<p>com.mycompany.optimalpuchasing.prsentation : ui</p>

<p>com.mycompany.optimalpuchasing.application : application</p>

<p>com.mycompany.optimalpuchasing.domain.model : domain</p>

<p>com.mycompany.optimalpuchasing.infrastructure : infra</p>

<p>샘플 컨텍스트</p>

<p>그림 2.7 완전히 서브도메인과 정렬된 바운디드 컨텍스트 샘플의 평가 관점</p>

<p>출처 : https://www.safaribooksonline.com/library/view/implementing-domain-driven-design/9780133039900/ch02lev1sec5.html</p>

<p>협업 컨텍스트</p>

<p>before</p>

<p>public class Forum extends Entity {</p>

<p>public Discussion startDiscussion (...) {</p>

<p>// repository 의존</p>

<p>User user = userRepository . userFor ( this . tenantId (), aUsername );</p>

<p>// 보안 로직</p>

<p>if (! user . hasPermissionTo ( Permission . Foru . StartDiscussion ))</p>

<p>//...</p>

<p>// 열차 충돌</p>

<p>String authorName = user . person (). name (). asFormattedName ();</p>

<p>//...</p>

<p>return newDiscussion ;</p>

<p>}</p>

<p>}</p>

<p>협업 보다는 보안을 염두함 in 협업 컨텍스트</p>

<p>전술적 패턴(DDD-Lite)으로는 해결 불가능. 전략적 설계 컨텍스트 맵!!</p>

<p>열차사고</p>

<p>usr.person().name().asFormattedName()</p>

<p>디미터의 법칙 위배</p>

<p>결론적 해결책을 통해 추가적인 전략적 설계를 사용해, 재사용 가능한 모델을 별도의 바운디드 컨텍스트로 분리하고 적절히 통합할 수 있게 됐다</p>

<p>after</p>

<p>public class ForumService {</p>

<p>@Transactional</p>

<p>public Discussion startDiscussion (...) {</p>

<p>Author author = this . colloboratorSrvice . authorFrom ( tenant , anAuthorId );</p>

<p>Discussion new Discussion = forum . startDiscussionFor (...);</p>

<p>//...</p>

<p>return newDiscussion ;</p>

<p>}</p>

<p>}</p>

<p>public class Forum extends Entity {</p>

<p>public Discussion startDiscussionFor (...) {</p>

<p>//...</p>

<p>}</p>

<p>}</p>

<p>User 와 Permission 의 의존을 제거하고 모델을 엄격히 협업에만 집중하게 함 Author</p>

<p>식별자와 엑세스 컨텍스트</p>

<p>사일로 효과 : 연통 배관 : 상호 협력을 하지 않고 중복이 생기고 각각 따로 놀게됨</p>

<p>위에서 지적된 것 처럼 식별자 컨텍스트를 분리하고 범용 지원 도메인으로써 활용</p>

<p>애자일 프로젝트 관리 컨텍스트</p>

<p>DDD 전략적 설계를 바탕으로 애자일 프로젝트 컨텍스트를 분리</p>

<p>컨텍스트는 각 팀에게 아주 구체적인 의미를 부여한다.</p>

<p>마무리</p>

<p>도메인, 서브도메인, 바운디드 컨텍스트</p>

<p>문제점 공간, 해결책 공간</p>

<p>모델을 구분(User vs Author)</p>

<p>바운디드 컨텍스트의 크기</p>

<p>사스오베이션 팀의 바운디드 컨텍스트 정제</p>

<p>IDDD 2장. 도메인, 서브도메인, 바운디드 컨텍스트 was originally published by MJ at DevOOOOOOOOP on April 28, 2018.</p>

<p>source : http://redutan.github.io/2018/04/28/IDDD-chapter02</p>

<p>---------------------------------------------------------------------------<br />Visit this link to stop these emails: http://zpr.io/nXidW</p>

                  
                </div>
                <nav class="page-navigation entry-navigation pagination content-nav">
                  <ul class="page-navigation-list">

                    <li class="page-navigation-list-item page-navigation-prev"><a rel="prev" href="https://weblog.youre.space/redutan/2018/04/000765.html" title="상속의 위험성">Previous entry</a></li>


                    <li class="page-navigation-list-item page-navigation-next"><a rel="next" href="https://weblog.youre.space/redutan/2018/05/000805.html" title="IDDD 1장. DDD를 시작하며">Next entry</a></li>

                  </ul>
                </nav>
                <!--
<aside id="zenback" class="zenback feedback">
  
    Please paste Zenback script code here.
  
</aside>
-->
                
                <aside id="trackbacks" class="trackbacks feedback">
  <h2>TrackBacks</h2>
  
  <p id="trackback-url">TrackBack URL: https://connexus.youre.space/mt6/mt-tb.cgi/306</p>
  
  
</aside>


              </article>
            </div>
            <aside class="widgets related" role="complementary">
              <nav class="widget-search widget">
  <div class="widget-content">
    <form method="get" id="search" action="https://connexus.youre.space/mt6/mt-search.cgi">
      <div>
        <input type="text" name="search" value="" placeholder="Search...">

        <input type="hidden" name="IncludeBlogs" value="17">

        <input type="hidden" name="limit" value="20">
        <button type="submit" name="button">
          <img alt="Search" src="https://connexus.youre.space/mt-static/support/theme_static/rainier/img/search-icon.png">
        </button>
      </div>
    </form>
  </div>
</nav>
<nav class="widget-archive-dropdown widget">
  <h3 class="widget-header">Archives</h3>
  <div class="widget-content">
    <select>
      <option>Select a Month...</option>
    
      <option value="https://weblog.youre.space/redutan/2018/07/">July 2018</option>
    
  
    
      <option value="https://weblog.youre.space/redutan/2018/06/">June 2018</option>
    
  
    
      <option value="https://weblog.youre.space/redutan/2018/05/">May 2018</option>
    
  
    
      <option value="https://weblog.youre.space/redutan/2018/04/">April 2018</option>
    
  
    
      <option value="https://weblog.youre.space/redutan/2018/02/">February 2018</option>
    
    </select>
  </div>
</nav>
    
  

<div class="widget-syndication widget section">
  <div class="widget-content">
    <p><img src="https://connexus.youre.space/mt-static/images/status_icons/feed.gif" alt="Subscribe to feed" width="9" height="9" /> <a href="https://weblog.youre.space/redutan/atom.xml">Subscribe to this blog's feed</a></p>

  </div>
</div>

            </aside>
          </div>
        </div>
        <footer id="footer" role="contentinfo">
          <div id="footer-inner">
            <div id="footer-content">
  <nav role="navigation">
          <ul>
            <li><a href="https://weblog.youre.space/redutan/">Home</a></li>


          </ul>
        </nav>

  <p class="license">&copy; Copyright 2019.</p>
  <p class="poweredby">Powered by <a href="http://www.movabletype.org/">Movable Type</a></p>
</div>
          </div>
        </footer>
      </div>
    </div>
    <script src="https://connexus.youre.space/mt-static/jquery/jquery.min.js"></script>
    <script src="https://weblog.youre.space/redutan/mt-theme-scale2.js"></script>
  </body>
</html>
