<!DOCTYPE html>
<html lang="en-us" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="UTF-8">
    <meta name="description" content="사용자 인퍼페이스와 도메인 모델 사이에 위치 유스케이스 태스크를 조정 트랜잭션, 보안 권한 부여 담당 애플리케이션을 핵심 도메인 모델과 상호 교류하며 이를 지원하기 위해 잘 조합된 컴포넌트의 집합을 의미하기 위해 사용하고 있다. 이는 일반적으로 도메인 모델 그 자체와 사용자 인터페이스, 내부적으로...">
    <meta name="generator" content="Movable Type 6.3.6">
    <title>IDDD 14장. 애플리케이션 - redutan</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="https://weblog.youre.space/redutan/styles.css">
    <!--[if lt IE 9]>
    <link rel="stylesheet" href="https://weblog.youre.space/redutan/styles_ie.css">
    <script src="/mt-static/support/theme_static/rainier/js/html5shiv.js"></script>
    <![endif]-->
    
    <link rel="start" href="https://weblog.youre.space/redutan/">
    <link rel="alternate" type="application/atom+xml" title="Recent Entries" href="https://weblog.youre.space/redutan/atom.xml" />
    <link rel="canonical" href="https://weblog.youre.space/redutan/2018/07/001048.html" />
    <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-102177098-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


    <link rel="prev" href="https://weblog.youre.space/redutan/2018/07/001045.html" title="IDDD 7장. 서비스">
    
    <!-- Open Graph Protocol -->
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en-us">
    <meta property="og:title" content="IDDD 14장. 애플리케이션">
    <meta property="og:url" content="https://weblog.youre.space/redutan/2018/07/001048.html">
    <meta property="og:description" content="사용자 인퍼페이스와 도메인 모델 사이에 위치 유스케이스 태스크를 조정 트랜잭션, 보안 권한 부여 담당 애플리케이션을 핵심 도메인 모델과 상호 교류하며 이를 지원하기 위해 잘 조합된 컴포넌트의 집합을 의미하기 위해 사용하고 있다. 이는 일반적으로 도메인 모델 그 자체와 사용자 인터페이스, 내부적으로...">
    <meta property="og:site_name" content="redutan">
    <meta property="og:image" content="/mt-static/support/theme_static/rainier/img/siteicon-sample.png">
    <!-- Metadata -->
    <meta itemprop="description" content="사용자 인퍼페이스와 도메인 모델 사이에 위치 유스케이스 태스크를 조정 트랜잭션, 보안 권한 부여 담당 애플리케이션을 핵심 도메인 모델과 상호 교류하며 이를 지원하기 위해 잘 조합된 컴포넌트의 집합을 의미하기 위해 사용하고 있다. 이는 일반적으로 도메인 모델 그 자체와 사용자 인터페이스, 내부적으로...">
    <link itemprop="url" href="https://weblog.youre.space/redutan/2018/07/001048.html">
    <link itemprop="image" href="/mt-static/support/theme_static/rainier/img/siteicon-sample.png">
    
  </head>
  <body>
    <div id="container">
      <div id="container-inner">
        <header id="header" role="banner">
          <div id="header-inner">
            <div id="header-content">
              <h1>
                <a href="https://weblog.youre.space/redutan/">

                  redutan

                </a>
              </h1>
              
            </div>

            <nav role="navigation">
          <ul>
            <li><a href="https://weblog.youre.space/redutan/">Home</a></li>


          </ul>
        </nav>

          </div>
        </header>
        <div id="content">
          <div id="content-inner">
            <ul class="breadcrumb breadcrumb-list">
              <li class="breadcrumb-list-item"><a href="https://weblog.youre.space/redutan/">Home</a></li>
              <li class="breadcrumb-list-item">IDDD 14장. 애플리케이션</li>
            </ul>
            <div id="individual-main" class="main" role="main">
              <article id="entry-1048" class="entry entry-asset asset hentry">
                <div class="asset-header">
                  <h2 itemprop="name" class="asset-name entry-title">IDDD 14장. 애플리케이션</h2>
                  <footer class="asset-meta">
                    <ul class="asset-meta-list">
                      <li class="asset-meta-list-item">Posted on <time datetime="2018-07-13T07:26:51+09:00" itemprop="datePublished">July 13, 2018</time></li>
                      <li class="asset-meta-list-item">by <span class="author entry-author vcard"><a class="fn url" href="http://weblog.youre.space/vergence/">Sangyong Gwak</a></span></li>

  

                   </ul>
                </footer>
                </div>
                <div class="entry-content asset-content" itemprop="articleBody">
                  <p>사용자 인퍼페이스와 도메인 모델 사이에 위치</p>

<p>유스케이스 태스크를 조정</p>

<p>트랜잭션, 보안 권한 부여 담당</p>

<p>애플리케이션을 핵심 도메인 모델과 상호 교류하며 이를 지원하기 위해 잘 조합된 컴포넌트의 집합을 의미하기 위해 사용하고 있다.</p>

<p>이는 일반적으로 도메인 모델 그 자체와 사용자 인터페이스, 내부적으로 사용되는 애플리케이션 서비스, 인프라적 컴포넌트를 뜻한다.</p>

<p>이 각각의 영역에 어떤 것들이 들어가는지는 애플리케이션마다 다르며, 사용하는 아키텍처가 무엇인지에 따라서도 달라진다.</p>

<p>그림 14.1 특정한 한 가지 아키텍처에 국한되지 않은 주요 애플리케이션 영역. 여전히 각기 다른 영역의 추상화에 의존적인 인프라의 DIP를 강조한다.</p>

<p>ui.Controller -구현-> infra.TomcatController -위임-> application.Service -구현-> infra.TransactionalService -위임-> domain.Repository -구현-> infra.JpaRepository -의존-> infra.Mysql</p>

<p>필자는 UI -> Appcliation -> Infra 순서로 설명해 나간다. (Top-Down 방식)</p>

<p>사용자 인터페이스</p>

<p>UI 종류</p>

<p>Web 1.0 렌더링 되는 HTML</p>

<p>Web 2.0 DHTML + Ajax</p>

<p>데스크톱 애플리케이션 + HTTP 통신</p>

<p>도메인 객체의 렌더링</p>

<p>그림 14.2 조회 시에는 복수 의 애그리게잇. 명령 시에는 한 개의 애그리게잇</p>

<p>애그리게잇 인스턴스로부터 데이터 전송 객체를 렌더링하기</p>

<p>DTO + Assembler</p>

<p>개인적으로 가장 선호하는 방식</p>

<p>애그리게잇 내부 상태를 발행하기 위해 중재자를 사용하자</p>

<p>중재자 패턴</p>

<p>개인적으로 비추 도메인 모델이 (약하긴 하지만) UI에 의존하게 됨</p>

<p>도메인 페이로드 객체로부터 애그리게잇 인스턴스를 렌더링하라</p>

<p>도메인 객체를 내부에 담고 있는 DPO(Domain Payload Object)로 렌더링 하는 방식</p>

<p>지연로딩 이슈가 있기 때문에 OSIV와 같은 기술과 함께 쓰길 권장한다.</p>

<p>애그리게잇 인스턴스의 상태 표현</p>

<p>View Model? Presentation Model?</p>

<p>DTO와 차이점을 모르겠다. 상태를 표현한다는 것으로 보아 불변이 가능한 정도 차이인 것인가?</p>

<p>유스케이스 최적 리파지토리 쿼리</p>

<p>특정 유스케이스에 특화된 쿼리 메소드 제공.</p>

<p>CQRS와 구분하자.</p>

<p>다수의 개별 클라이언트 처리하기</p>

<p>이건 SKIP 하자. 최근의 MVC 프레임워크에서 지원하므로 Application의 책임이 아니라고 본다.</p>

<p>변환 어댑터와 사용자 편집의 처리</p>

<p>Adapter + Command (Or Presentation Model)</p>

<p>주로 명령(편집, 수정) 시에 사용하는 방식</p>

<p>애플리케이션 서비스</p>

<p>애플리케이션 서비스를 얇게 유지(파사드)</p>

<p>도메인 모델로 위임</p>

<p>애플리케이션 서비스 예제</p>

<p>원시타입의 나열 VS 인자 (커맨드) 객체</p>

<p>원시타입이 너무 많이 나열되면 그것은 안티패턴이라고 보고 가능하면 인자(Or 커맨드)로 캡슐화 하는 것이 좋아 보인다.</p>

<p>단순 인자이며 명령을 캡슐화 하지 못하는데 커맨드 패턴이라고 부르는 것이 어색해 보인다.</p>

<p>package com . saasovation . identityaccess . application ;</p>

<p>class TenantIdentityService {</p>

<p>@Transactional // 트랜잭션과 보안 처리</p>

<p>@PreAuthorize ( "hasRole('SubscriberRepresentative')" )</p>

<p>public void activeTenant ( TenantId tenantId ) {</p>

<p>// 도메인 모델로 위임</p>

<p>this . nonNullTenant ( tenant ). activate ();</p>

<p>}</p>

<p>@Transactional ( readOnly = true )</p>

<p>public Tenant nonNullTenant ( TenantId tenantId ) {</p>

<p>Tenant tenant = this . tenant ( tenantId );</p>

<p>if ( tenant == null ) {</p>

<p>throw new IllegalArgumentException ( "Tenant does not exists" );</p>

<p>}</p>

<p>return tenant ;</p>

<p>}</p>

<p>}</p>

<p>결합이 분리된 서비스 출력</p>

<p>@Override</p>

<p>@Transactional ( readOnly = true )</p>

<p>public void findTenant ( TenantId tenantId ) {</p>

<p>Tenant teannt =</p>

<p>this . tenantRepository . tenantOfId ( tenantId )</p>

<p>this . tenantIdentityOutputPort (). write ( tenant );</p>

<p>}</p>

<p>최근 추세는 어쨋든 사용자에게 출력에 대한 책임은 가능한 UI가 하는 것이 좋다고 본다.</p>

<p>이는 애플리케이션의 책임이 아닌 것 같다.</p>

<p>그러한 것은 컴포넌트로 추상화 해서 UI 모듈에 있는 것이 더 어울리는 것 같다. 개인적으로 출력은 반환 값이 있는 것이 더 직관적으로 보인다.</p>

<p>여러 바운디드 컨텍스트 묶기</p>

<p>그림 14.3 UI에서 다수의 모델을 구성해야만 할 때가 있다. 이 그림에서는 하나의 애플리케이션 계층을 사용해서 세 개의 모델을 구성한다.</p>

<p>애플리케이션 계층이 유스케이스 를 관리 - UI 계층이 아니다!!</p>

<p>제품, 토론, 리뷰 컨텍스트가 분리 VS 하나의 컨텍스트로 통합 > 결론은 모델 정제!!</p>

<p>개인적으로 이러한 상황에서는 UI에서 각각 쿼리 해서 조합하던가, API-GW에서 조합하는 것이 좋다고 본다.</p>

<p>물론 특정 컨텍스트 내에서 조합해야 한다면 애플리케이션 서비스 가 가장 어울리는 장소인 것 같다.</p>

<p>인프라</p>

<p>그림 14.4 애플리케이션 서비스는 도메인 모델의 리파지토리 인터페이스에 의존적이지만, 인프라의 구현 클래스를 사용한다. 패키지는 넓은 범위의 책임을 캡슐화 한다</p>

<p>엔터프라이즈 컴포넌트 컨테이너</p>

<p>EJB VS Spring</p>

<p>마무리</p>

<p>도메인 모델 -> UI 모델</p>

<p>사용자 입력 -> 도메인 모델</p>

<p>애플리케이션 서비스의 책임</p>

<p>DIP로 도메인 모델과 기술(인프라) 분리 및 유연성 확보</p>

<p>IDDD 14장. 애플리케이션 was originally published by MJ at DevOOOOOOOOP on June 19, 2018.</p>

<p>source : http://redutan.github.io/2018/06/19/IDDD-chapter14</p>

<p>---------------------------------------------------------------------------<br />Visit this link to stop these emails: http://zpr.io/nXidW</p>

                  
                </div>
                <nav class="page-navigation entry-navigation pagination content-nav">
                  <ul class="page-navigation-list">

                    <li class="page-navigation-list-item page-navigation-prev"><a rel="prev" href="https://weblog.youre.space/redutan/2018/07/001045.html" title="IDDD 7장. 서비스">Previous entry</a></li>


                  </ul>
                </nav>
                <!--
<aside id="zenback" class="zenback feedback">
  
    Please paste Zenback script code here.
  
</aside>
-->
                
                <aside id="trackbacks" class="trackbacks feedback">
  <h2>TrackBacks</h2>
  
  <p id="trackback-url">TrackBack URL: /mt6/mt-tb.cgi/322</p>
  
  
</aside>


              </article>
            </div>
            <aside class="widgets related" role="complementary">
              <nav class="widget-search widget">
  <div class="widget-content">
    <form method="get" id="search" action="/mt6/mt-search.cgi">
      <div>
        <input type="text" name="search" value="" placeholder="Search...">

        <input type="hidden" name="IncludeBlogs" value="17">

        <input type="hidden" name="limit" value="20">
        <button type="submit" name="button">
          <img alt="Search" src="/mt-static/support/theme_static/rainier/img/search-icon.png">
        </button>
      </div>
    </form>
  </div>
</nav>
<nav class="widget-archive-dropdown widget">
  <h3 class="widget-header">Archives</h3>
  <div class="widget-content">
    <select>
      <option>Select a Month...</option>
    
      <option value="https://weblog.youre.space/redutan/2018/07/">July 2018</option>
    
  
    
      <option value="https://weblog.youre.space/redutan/2018/06/">June 2018</option>
    
  
    
      <option value="https://weblog.youre.space/redutan/2018/05/">May 2018</option>
    
  
    
      <option value="https://weblog.youre.space/redutan/2018/04/">April 2018</option>
    
  
    
      <option value="https://weblog.youre.space/redutan/2018/02/">February 2018</option>
    
    </select>
  </div>
</nav>
    
  

<div class="widget-syndication widget section">
  <div class="widget-content">
    <p><img src="/mt-static/images/status_icons/feed.gif" alt="Subscribe to feed" width="9" height="9" /> <a href="https://weblog.youre.space/redutan/atom.xml">Subscribe to this blog's feed</a></p>

  </div>
</div>

            </aside>
          </div>
        </div>
        <footer id="footer" role="contentinfo">
          <div id="footer-inner">
            <div id="footer-content">
  <nav role="navigation">
          <ul>
            <li><a href="https://weblog.youre.space/redutan/">Home</a></li>


          </ul>
        </nav>

  <p class="license">&copy; Copyright 2019.</p>
  <p class="poweredby">Powered by <a href="http://www.movabletype.org/">Movable Type</a></p>
</div>
          </div>
        </footer>
      </div>
    </div>
    <script src="/mt-static/jquery/jquery.min.js"></script>
    <script src="https://weblog.youre.space/redutan/mt-theme-scale2.js"></script>
  </body>
</html>
