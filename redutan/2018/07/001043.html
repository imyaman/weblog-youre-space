<!DOCTYPE html>
<html lang="en-us" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="UTF-8">
    <meta name="description" content="가능한 엔터티 대신 값 객체를 사용해 모델링하도록 노력해야 한다. 특성만 신경 쓴다면 이를 값 객체로 분리하라. 특성의 의미를 표현하고 기능도 부여하자. 불변성. 식별자는 필요 없고, 설계의 복잡성을 줄여준다. 값의 특징 개념을 값으로 측정, 수량화, 설명 불변성(no side-effect) 개념적 전체 변경...">
    <meta name="generator" content="Movable Type 6.3.6">
    <title>IDDD 6장. 값 객체 - redutan</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="https://weblog.youre.space/redutan/styles.css">
    <!--[if lt IE 9]>
    <link rel="stylesheet" href="https://weblog.youre.space/redutan/styles_ie.css">
    <script src="https://weblog.youre.space/mt-static/support/theme_static/rainier/js/html5shiv.js"></script>
    <![endif]-->
    
    <link rel="start" href="https://weblog.youre.space/redutan/">
    <link rel="alternate" type="application/atom+xml" title="Recent Entries" href="https://weblog.youre.space/redutan/atom.xml" />
    <link rel="canonical" href="https://weblog.youre.space/redutan/2018/07/001043.html" />
    <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-102177098-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


    <link rel="prev" href="https://weblog.youre.space/redutan/2018/07/000963.html" title="IDDD 12장. 리파지토리">
    <link rel="next" href="https://weblog.youre.space/redutan/2018/07/001045.html" title="IDDD 7장. 서비스">
    <!-- Open Graph Protocol -->
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en-us">
    <meta property="og:title" content="IDDD 6장. 값 객체">
    <meta property="og:url" content="https://weblog.youre.space/redutan/2018/07/001043.html">
    <meta property="og:description" content="가능한 엔터티 대신 값 객체를 사용해 모델링하도록 노력해야 한다. 특성만 신경 쓴다면 이를 값 객체로 분리하라. 특성의 의미를 표현하고 기능도 부여하자. 불변성. 식별자는 필요 없고, 설계의 복잡성을 줄여준다. 값의 특징 개념을 값으로 측정, 수량화, 설명 불변성(no side-effect) 개념적 전체 변경...">
    <meta property="og:site_name" content="redutan">
    <meta property="og:image" content="https://weblog.youre.space/mt-static/support/theme_static/rainier/img/siteicon-sample.png">
    <!-- Metadata -->
    <meta itemprop="description" content="가능한 엔터티 대신 값 객체를 사용해 모델링하도록 노력해야 한다. 특성만 신경 쓴다면 이를 값 객체로 분리하라. 특성의 의미를 표현하고 기능도 부여하자. 불변성. 식별자는 필요 없고, 설계의 복잡성을 줄여준다. 값의 특징 개념을 값으로 측정, 수량화, 설명 불변성(no side-effect) 개념적 전체 변경...">
    <link itemprop="url" href="https://weblog.youre.space/redutan/2018/07/001043.html">
    <link itemprop="image" href="https://weblog.youre.space/mt-static/support/theme_static/rainier/img/siteicon-sample.png">
    
  </head>
  <body>
    <div id="container">
      <div id="container-inner">
        <header id="header" role="banner">
          <div id="header-inner">
            <div id="header-content">
              <h1>
                <a href="https://weblog.youre.space/redutan/">

                  redutan

                </a>
              </h1>
              
            </div>

            <nav role="navigation">
          <ul>
            <li><a href="https://weblog.youre.space/redutan/">Home</a></li>


          </ul>
        </nav>

          </div>
        </header>
        <div id="content">
          <div id="content-inner">
            <ul class="breadcrumb breadcrumb-list">
              <li class="breadcrumb-list-item"><a href="https://weblog.youre.space/redutan/">Home</a></li>
              <li class="breadcrumb-list-item">IDDD 6장. 값 객체</li>
            </ul>
            <div id="individual-main" class="main" role="main">
              <article id="entry-1043" class="entry entry-asset asset hentry">
                <div class="asset-header">
                  <h2 itemprop="name" class="asset-name entry-title">IDDD 6장. 값 객체</h2>
                  <footer class="asset-meta">
                    <ul class="asset-meta-list">
                      <li class="asset-meta-list-item">Posted on <time datetime="2018-07-13T07:26:46+09:00" itemprop="datePublished">July 13, 2018</time></li>
                      <li class="asset-meta-list-item">by <span class="author entry-author vcard"><a class="fn url" href="http://weblog.youre.space/vergence/">Sangyong Gwak</a></span></li>

  

                   </ul>
                </footer>
                </div>
                <div class="entry-content asset-content" itemprop="articleBody">
                  <p>가능한 엔터티 대신 값 객체를 사용해 모델링하도록 노력해야 한다.</p>

<p>특성만 신경 쓴다면 이를 값 객체로 분리하라. 특성의 의미를 표현하고 기능도 부여하자. 불변성. 식별자는 필요 없고, 설계의 복잡성을 줄여준다.</p>

<p>값의 특징</p>

<p>개념을 값으로</p>

<p>측정, 수량화, 설명</p>

<p>불변성(no side-effect)</p>

<p>개념적 전체</p>

<p>변경 대신 대치</p>

<p>등가성(value equality:동등성)</p>

<p>유비쿼터스 언어로써 표현하는 값이어야함</p>

<p>측정, 수량화, 설명</p>

<p>날짜와 시간, 나이, 통화, 주소, 도형, …</p>

<p>불변성</p>

<p>No Setter</p>

<p>하지만 완벽하진 않다. 방어 복사가 필요할 수 있음 (final 일지라도 불변은 깨질 수 있다.)</p>

<p>개념적 전체</p>

<p>주소 = 우편번호 + 기본주소 + 상세주소</p>

<p>돈 = 500(수량) + 달러(통화)</p>

<p>Bad Case</p>

<p>class ThingOfWorth { // 가치 있는 것</p>

<p>private String name ;</p>

<p>private BigDecimal amount ;</p>

<p>private String currency ;</p>

<p>}</p>

<p>Good Case</p>

<p>class ThingOfWorth { // 가치 있는 것</p>

<p>private ThingName name ; // !!</p>

<p>private MonetaryValue worth ; // 가치</p>

<p>}</p>

<p>@Value</p>

<p>class MonetraryValue {</p>

<p>private BigDecimal amount ;</p>

<p>private Currency currency ;</p>

<p>}</p>

<p>ThingName 으로 값 객체로 만들어서 name의 기능을 중앙화 시킬 수 있다. (도메인 로직을 안으로 품을 수 있음)</p>

<p>대체성</p>

<p>값은 변경이 불가능하므로 값 참조를 다른 값으로 바꾸는 것을 말함</p>

<p>FullName name = new FullName ( "Myeongju" , "Jung" );</p>

<p>// ...</p>

<p>name = new FullName ( "Jiwon" , "M" , "Jung" );</p>

<p>값 등가성</p>

<p>equals(), hasoCode()</p>

<p>엔터티로 설계된 개념이 식별자가 필요하지 않다면 값 객체 로 모델링하자.</p>

<p>부작용이 없는 행동</p>

<p>만약 값객체에 행위가 없다면, 좋은 설계인지 의심하라</p>

<p>Getter : No side-effect</p>

<p>Setter : With side-effect</p>

<p>FullName name = new FullName ( "Myeongju" , "Jung" );</p>

<p>// ...</p>

<p>name = name . withMiddleInitial ( "M" );</p>

<p>FullName withMiddleInitial ( String middleName ) {</p>

<p>return new FullName ( this . firstName , middleName , this . lastName );</p>

<p>}</p>

<p>값 객체의 매개변수로 값만 전달하자.</p>

<p>만약 엔터티와 같은 가변성을 가지는 인자를 받는다면 부작용이 발생할 가능성 이 생긴다.</p>

<p>아니면 Getter만 제공하는 추상화된 인자를 받는 것도 좋은 방법이다. > Entity에 Getter만 있는 인터페이스를 Mixin</p>

<p>기본 언어 값 타입에는 도메인에 맞춘 부작용이 없는 함수를 할당할 수 없다</p>

<p>도메인적인 표현이 기본 언어 함수에서 제공할 수 있을리가 없다.</p>

<p>미니멀리즘으로 통합하기</p>

<p>ACL 내에서는 조회용으로써 일부 특성과 행위가 요구된다.</p>

<p>즉 Entity 전체가 필요한(순응자나 공유모델) 것이 아니라, 해당 컨택스트 내에서 어울리는 타입으로써 값 객체가 좋은 선택</p>

<p>값으로 표현되는 표준 타입</p>

<p>표준 타입에는 Enum을 쓰는 것이 좋다</p>

<p>잘 이해가 안된다 ㅠㅠ</p>

<p>값 객체의 테스트</p>

<p>클라이언트 관점에서 값 객체를 보는 것은 중요하다.</p>

<p>불변성을 테스트 해야 한다.</p>

<p>테스트를 통해서 도메인적 표현을 확인할 수 있어야 한다.</p>

<p>구현</p>

<p>불변, 불변, 불변 (No Setter)</p>

<p>equals() , hashCode() , toString()</p>

<p>JPA를 위해서 빈 생성자는 필수 (PACKAGE 접근제어로 생성)</p>

<p>보호절을 통한 불변식 강제</p>

<p>값 객체의 저장</p>

<p>데이터 모델 누수의 부정적 영향을 거부하라</p>

<p>도메인 모델을 위해서 데이터 모델을 설계해야한다.</p>

<p>ORM 구현</p>

<p>오래된 내용이라서 SKIP. 이젠 Spring Data Jpa 를 사용하자.</p>

<p>마무리</p>

<p>값 객체 특징, 사용, 구현</p>

<p>IDDD 6장. 값 객체 was originally published by MJ at DevOOOOOOOOP on May 15, 2018.</p>

<p>source : http://redutan.github.io/2018/05/15/IDDD-chapter06</p>

<p>---------------------------------------------------------------------------<br />Visit this link to stop these emails: http://zpr.io/nXidW</p>

                  
                </div>
                <nav class="page-navigation entry-navigation pagination content-nav">
                  <ul class="page-navigation-list">

                    <li class="page-navigation-list-item page-navigation-prev"><a rel="prev" href="https://weblog.youre.space/redutan/2018/07/000963.html" title="IDDD 12장. 리파지토리">Previous entry</a></li>


                    <li class="page-navigation-list-item page-navigation-next"><a rel="next" href="https://weblog.youre.space/redutan/2018/07/001045.html" title="IDDD 7장. 서비스">Next entry</a></li>

                  </ul>
                </nav>
                <!--
<aside id="zenback" class="zenback feedback">
  
    Please paste Zenback script code here.
  
</aside>
-->
                
                <aside id="trackbacks" class="trackbacks feedback">
  <h2>TrackBacks</h2>
  
  <p id="trackback-url">TrackBack URL: http://connexus-recall.youre.space:5000/mt-tb.cgi/320</p>
  
  
</aside>


              </article>
            </div>
            <aside class="widgets related" role="complementary">
              <nav class="widget-search widget">
  <div class="widget-content">
    <form method="get" id="search" action="http://connexus-recall.youre.space:5000/mt-search.cgi">
      <div>
        <input type="text" name="search" value="" placeholder="Search...">

        <input type="hidden" name="IncludeBlogs" value="17">

        <input type="hidden" name="limit" value="20">
        <button type="submit" name="button">
          <img alt="Search" src="https://weblog.youre.space/mt-static/support/theme_static/rainier/img/search-icon.png">
        </button>
      </div>
    </form>
  </div>
</nav>
<nav class="widget-archive-dropdown widget">
  <h3 class="widget-header">Archives</h3>
  <div class="widget-content">
    <select>
      <option>Select a Month...</option>
    
      <option value="https://weblog.youre.space/redutan/2018/07/">July 2018</option>
    
  
    
      <option value="https://weblog.youre.space/redutan/2018/06/">June 2018</option>
    
  
    
      <option value="https://weblog.youre.space/redutan/2018/05/">May 2018</option>
    
  
    
      <option value="https://weblog.youre.space/redutan/2018/04/">April 2018</option>
    
  
    
      <option value="https://weblog.youre.space/redutan/2018/02/">February 2018</option>
    
    </select>
  </div>
</nav>
    
  

<div class="widget-syndication widget section">
  <div class="widget-content">
    <p><img src="https://weblog.youre.space/mt-static/images/status_icons/feed.gif" alt="Subscribe to feed" width="9" height="9" /> <a href="https://weblog.youre.space/redutan/atom.xml">Subscribe to this blog's feed</a></p>

  </div>
</div>

            </aside>
          </div>
        </div>
        <footer id="footer" role="contentinfo">
          <div id="footer-inner">
            <div id="footer-content">
  <nav role="navigation">
          <ul>
            <li><a href="https://weblog.youre.space/redutan/">Home</a></li>


          </ul>
        </nav>

  <p class="license">&copy; Copyright 2019.</p>
  <p class="poweredby">Powered by <a href="http://www.movabletype.org/">Movable Type</a></p>
</div>
          </div>
        </footer>
      </div>
    </div>
    <script src="https://weblog.youre.space/mt-static/jquery/jquery.min.js"></script>
    <script src="https://weblog.youre.space/redutan/mt-theme-scale2.js"></script>
  </body>
</html>
