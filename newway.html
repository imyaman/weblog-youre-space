<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta property="og:title" content="YOUR E-SPACE WEBLOG">
<meta property="og:description" content="YOUR E-SPACE가 제공하는 WEBLOG 서비스입니다. 글쓴이가 자기 글의 완전한 소유자가 되도록, 설치형 블로그를 나누고 있습니다.">
<meta property="og:image" content="icons/Icon-256.png">

<link rel="manifest" href="manifest.webmanifest">
<link rel="icon" href="icons/Icon-512.png">
<link rel="preload" href="//unpkg.com/navigo@6" type="application/javascript" as="script">
<link rel="preload" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css" as="style">
<link rel="preload" href="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" as="script">
<link rel="preload" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js" as="script">
<link rel="preload" href="//cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.min.js" as="script">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css" crossorigin="anonymous">
</head>
<body>

<div class="container"></div>

<footer class="footer">
<div id='mmaDisplay'>
<script src='//image.cauly.co.kr/websdk/common/lasted/ads.js'></script>
<script> new CaulyAds({app_code:'EJuPK2Dp',placement:1,displayid:'mmaDisplay', }); </script>
</div>

<!-- admixer starts -->
<center>
  <div id="admixer_display"></div>
</center>
<div id="log"></div>
<script type="text/javascript" src="//scr.nsmartad.com/admixer/admixer.js"></script>
<script type="text/javascript">
new admixer_ad({
  admixer_key:"zp1v4th5",
  display_id:"admixer_display",
  adsense_publisher_key:"", //AdSense 사용시에만 필요 ca-mb-pub-0000000000000000
  ad_change:true,  //default : true
  test : false,  //default : false
  test_display_id : "log"
});
</script>
<!-- admixer ends -->
</footer>
<script src="//unpkg.com/navigo@6" type="application/javascript"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" type="application/javascript" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js" type="application/javascript" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.min.js" type="application/javascript"></script>
<script type="application/javascript">

console.log('start my code');
console.log(window.location);

var root = null;
var useHash = true; // Defaults to: false
var hash = '#'; // can be : '#', '#!'
var router = new Navigo(root, useHash, hash);
var theIdUrl;

$(".button").click(function(){
  var theId=$(this).attr('id');
  console.log(  theId  );

  $(location).attr('href','#/article/' + theId);
  window.location = '#/article/' + theId;
});

router
  .on(function () {
    console.log('this is main/root handler');
    console.log(window.location);
    // show menu or a list
    $.get("//weblog.youre.space/baas/latest.html", function( data ) {
      $( ".container" ).html( data );
    });

    $(document).attr("title", "POST ID : " + "LATEST" );
    $("meta[property='og\\:title']").attr("content", 'title: ' + "the last post");
    $("meta[property='og\\:description']").attr("content", 'description: ' + "the last post");
  })
  .resolve();

router
  .on('/article/:id', function (params) {
    console.log('this is article handler');
    console.log(window.location);

    theIdUrl = params.id;
    console.log(theIdUrl);
    $.get("//weblog.youre.space/baas/bodyonly/" + theIdUrl + ".html", function( data ) {
      $( ".container" ).html( data );
    });
    $(document).attr("title", "Content ID "+theIdUrl);
    $("meta[property='og\\:title']").attr("content", 'Content ID ' + theIdUrl);
    $("meta[property='og\\:description']").attr("content", 'description: ' + theIdUrl);

  })
  .resolve();

</script> <!-- end of js -->

<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
    navigator.serviceWorker.register('/sw.js').then(function(registration) {
      // Registration was successful
      console.log('ServiceWorker registration successful with scope: ', registration.scope);
    }).catch(function(err) {
      // registration failed :(
      console.log('ServiceWorker registration failed: ', err);
    });
  });
}

</script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-102177098-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-102177098-1');
</script>

<script type="text/babel">
</script> <!-- end of babel -->
</body>
</html>