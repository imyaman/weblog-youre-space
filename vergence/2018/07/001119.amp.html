<!doctype html>
<html ⚡ itemscope itemtype="http://schema.org/Article" lang="ko">
<head>   
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,minimum-scale=1">
  <link rel="canonical" href="http://weblog.youre.space/vergence/2018/07/001119.html">
  <style amp-boilerplate>
body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}
</style>
<noscript>
<style amp-boilerplate>
body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}
</style>
</noscript>
<script async src="https://cdn.ampproject.org/v0.js"></script>
  <meta name="description" content="사설 네트워크에 여러개의 서버가 있고, 그 중 하나의 서버에만 공인 IP가 있는 상황입니다. 외부에서 공인 IP를 통해 사설 네트워크 안의 서버에 접근하고 싶을 때, 포트 포워딩을 이용할 수 있습니다. 공인 IP가 있는 서버를 P1, 사설 네트워크 내부의 서버를 S1, S2라고...">
  <meta name="generator" content="Movable Type 6.3.6">
  <title>포트 포워딩 예시 - vergence의 이상한 세상</title>

  <link rel="prev" href="http://weblog.youre.space/vergence/2018/07/001098.amp.html" title="암호화폐 신용카드 Change">
  <link rel="next" href="http://weblog.youre.space/vergence/2018/08/001208.amp.html" title="휴가에 아무말">

    <!-- Open Graph Protocol -->
    <meta property="og:type" content="article">
    <meta property="og:locale" content="ko_KR">
    <meta property="og:title" content="포트 포워딩 예시">
    <meta property="og:url" content="http://weblog.youre.space/vergence/2018/07/001119.html">
    <meta property="og:description" content="사설 네트워크에 여러개의 서버가 있고, 그 중 하나의 서버에만 공인 IP가 있는 상황입니다. 외부에서 공인 IP를 통해 사설 네트워크 안의 서버에 접근하고 싶을 때, 포트 포워딩을 이용할 수 있습니다. 공인 IP가 있는 서버를 P1, 사설 네트워크 내부의 서버를 S1, S2라고...">
    <meta property="og:site_name" content="vergence의 이상한 세상">
    <meta property="og:image" content="http://weblog.youre.space/vergence/assets_c/2017/08/20170719_155350_HDR-thumb-320x320-2.jpg">

    <!-- Metadata -->
    <meta itemprop="description" content="사설 네트워크에 여러개의 서버가 있고, 그 중 하나의 서버에만 공인 IP가 있는 상황입니다. 외부에서 공인 IP를 통해 사설 네트워크 안의 서버에 접근하고 싶을 때, 포트 포워딩을 이용할 수 있습니다. 공인 IP가 있는 서버를 P1, 사설 네트워크 내부의 서버를 S1, S2라고...">
    <link itemprop="url" href="http://weblog.youre.space/vergence/2018/07/001119.html">
    <link itemprop="image" href="http://weblog.youre.space/vergence/assets_c/2017/08/20170719_155350_HDR-thumb-320x320-2.jpg">
    
  </head>
  <body itemscope itemtype="http://schema.org/Article">

<h1 itemprop="headline">포트 포워딩 예시</h1>
<time datetime="2018-07-15T22:57:49+09:00" itemprop="datePublished">July 15, 2018</time>
<time datetime="2018-07-15T22:57:49+09:00" itemprop="dateModified">July 15, 2018</time>

by <span itemprop="author"><a class="fn url" href="http://weblog.youre.space/vergence/">Sangyong Gwak</a></span>

<div itemprop="articleBody">
  <p>사설 네트워크에 여러개의 서버가 있고, 그 중 하나의 서버에만 공인 IP가 있는 상황입니다. 외부에서 공인 IP를 통해 사설 네트워크 안의 서버에 접근하고 싶을 때, 포트 포워딩을 이용할 수 있습니다.</p>
<p>공인 IP가 있는 서버를 P1, 사설 네트워크 내부의 서버를 S1, S2라고 하겠습니다.</p>
<p>iptables로 아래와 같이 하면, P1의 1022 포트로 접근하면, S1의 22번 포트로 연결됩니다. S1의 주소가 10.1.1.3 입니다.</p>
<p>iptables -A PREROUTING -i ens3 -p tcp -m tcp --dport 1022 -j DNAT --to-destination 10.1.1.3:22<br />iptables -A PREROUTING -p tcp -m tcp --dport 1022 -j DNAT --to-destination 10.1.1.3:22<br />iptables -A POSTROUTING -o ens3 -j MASQUERADE<br />iptables -A FORWARD -p tcp -m tcp --dport 22 -j ACCEPT<br />iptables -A FORWARD -p tcp -m tcp --dport 1022 -j ACCEPT<br /><br />저는 이렇게 설정파일을 만들어 쓰고 있습니다.<br />==== ==== ==== ====</p>
<p>root@w001 # cat /etc/iptables.rules<br /># Generated by iptables-save v1.6.0 on Sat Jul 14 15:18:13 2018<br />*nat<br />:PREROUTING ACCEPT [33:4792]<br />:INPUT ACCEPT [33:4792]<br />:OUTPUT ACCEPT [13:3996]<br />:POSTROUTING ACCEPT [0:0]<br />-A PREROUTING -i ens3 -p tcp -m tcp --dport 1022 -j DNAT --to-destination 10.1.1.3:22<br />-A PREROUTING -i ens3 -p tcp -m tcp --dport 1022 -j DNAT --to-destination 10.1.1.3:22<br />-A PREROUTING -i ens3 -p tcp -m tcp --dport 1022 -j DNAT --to-destination 10.1.1.3:22<br />-A PREROUTING -p tcp -m tcp --dport 1022 -j DNAT --to-destination 10.1.1.3:22<br />-A PREROUTING -p tcp -m tcp --dport 1022 -j DNAT --to-destination 10.1.1.3:22<br />-A PREROUTING -p tcp -m tcp --dport 15900 -j DNAT --to-destination 10.1.1.3:59000<br />-A POSTROUTING -o ens3 -j MASQUERADE<br />COMMIT<br /># Completed on Sat Jul 14 15:18:13 2018<br /># Generated by iptables-save v1.6.0 on Sat Jul 14 15:18:13 2018<br />*filter<br />:INPUT ACCEPT [538:51319]<br />:FORWARD ACCEPT [320:109251]<br />:OUTPUT ACCEPT [454:58003]<br />-A FORWARD -p tcp -m tcp --dport 22 -j ACCEPT<br />-A FORWARD -p tcp -m tcp --dport 1022 -j ACCEPT<br />-A FORWARD -p tcp -m tcp --dport 15900 -j ACCEPT<br />COMMIT<br /><br /></p>
  
</div>

  <a href=http://weblog.youre.space//vergence/2018/07/001119.html target="_blank">http://weblog.youre.space//vergence/2018/07/001119.html</a>

<center>
<div id="admixer_display"></div>
</center>
<script type="text/javascript" src="http://scr.nsmartad.com/admixer/admixer.js"></script>
<script type="text/javascript">
    new admixer_ad({
    admixer_key:"8ch8bwvi",
    display_id:"admixer_display",
    adsense_publisher_key:"ca-mb-pub-0000000000000000", //AdSense 사용시에만 필요
    ad_change:true,  //default : true
    test : false,//default : false
    test_display_id : "log"
});
</script>
<center>
<div class="main_banner" id="main_banner1">
  <script type="text/javascript"> var tad_conf = { targetId : 'main_banner1', clientId : 'MX00048A1', slotNo : 2 }; </script>
  <script type="text/javascript" src="http://adddn.adotsolution.com/contents/sdk/js/tad.min.js"></script>
</div>
</center>
<center>
<div id="realssp_imyaman00001_8388" class="realssp_dv" data-mcode="aW15YW1hbjAwMDAxXzgzODg="></div><script src="http://nw.realssp.co.kr/realclickssp.js?v=1.0&m=imyaman00001_8388&t=j" async></script>
</center>

  </body>
</html>
